{
  "info": {
    "_postman_id": "aea5d631-3068-4983-bd04-12c1326ce0e8",
    "name": "GQL - Countries",
    "description": "**GraphQL API Testing – Countries API**\n\nThis collection contains a comprehensive set of positive and negative GraphQL tests for the public **Countries API**(`https://countries.trevorblades.com/`).  \nIt validates the API at both the **HTTP transport layer** and the **GraphQL contract layer**.\n\nThe collection covers:\n\n- **HTTP correctness** (status codes, status text, content type)\n    \n- **GraphQL protocol behavior** (`data` vs `errors`)\n    \n- **Schema validation** (field types, nullability, lists, nested objects)\n    \n- **Data integrity** (ISO country codes, uniqueness, known values)\n    \n- **Filtering and query arguments**\n    \n- **Negative validation scenarios** (missing variables, invalid fields, schema violations)\n    \n\nAll requests are sent as **standard HTTP POST GraphQL calls** (using Postman’s HTTP + GraphQL Body mode) to ensure compatibility with **Newman and CI/CD pipelines**.\n\nThis collection demonstrates how GraphQL APIs should be tested in production systems:  \nnot just by checking response codes, but by validating the **schema, structure, and correctness of the data returned**.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Get countries",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "e7fe9d14-539d-4416-bc16-b7621b984b42",
            "exec": [
              "const response = pm.response.json();",
              "",
              "/* ===============================",
              "   1. HTTP & GraphQL Basics",
              "================================ */",
              "",
              "pm.test('HTTP status is 200', () => {",
              "  pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('HTTP status text is OK', () => {",
              "    pm.expect(pm.response.status).to.equal('OK');",
              "});",
              "",
              "pm.test('GraphQL returned data', () => {",
              "  pm.expect(response.data).to.exist;",
              "});",
              "",
              "pm.test('GraphQL returned no errors', () => {",
              "  pm.expect(response.errors).to.not.exist;",
              "});",
              "",
              "/* ===============================",
              "   2. Countries Array Validation",
              "================================ */",
              "",
              "pm.test('Countries array exists', () => {",
              "  pm.expect(response.data.countries).to.be.an('array');",
              "});",
              "",
              "pm.test('Countries array is not empty', () => {",
              "  pm.expect(response.data.countries.length).to.be.greaterThan(0);",
              "});",
              "",
              "/* ===============================",
              "   3. Schema Validation",
              "================================ */",
              "",
              "pm.test('Each country has code and name as strings', () => {",
              "  response.data.countries.forEach(country => {",
              "    pm.expect(country).to.have.property('code');",
              "    pm.expect(country).to.have.property('name');",
              "    pm.expect(country.code).to.be.a('string');",
              "    pm.expect(country.name).to.be.a('string');",
              "  });",
              "});",
              "",
              "/* ===============================",
              "   4. ISO Code Validation",
              "================================ */",
              "",
              "pm.test('All country codes follow ISO-2 format', () => {",
              "  response.data.countries.forEach(country => {",
              "    pm.expect(country.code).to.match(/^[A-Z]{2}$/);",
              "  });",
              "});",
              "",
              "/* ===============================",
              "   5. Data Integrity",
              "================================ */",
              "",
              "pm.test('Dominican Republic exists with correct code', () => {",
              "  const dr = response.data.countries.find(c => c.code === 'DO');",
              "  pm.expect(dr).to.exist;",
              "  pm.expect(dr.name).to.equal('Dominican Republic');",
              "});",
              "",
              "/* ===============================",
              "   6. Uniqueness Validation",
              "================================ */",
              "",
              "pm.test('Country codes are unique', () => {",
              "  const codes = response.data.countries.map(c => c.code);",
              "  const uniqueCodes = new Set(codes);",
              "  pm.expect(uniqueCodes.size).to.equal(codes.length);",
              "});"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "id": "1695d89e-8aaf-479f-9589-bcca66adf4e1",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "graphql",
          "graphql": {
            "query": "query GetCountries {\n    countries {\n        code\n        name\n    }\n}\n",
            "variables": ""
          }
        },
        "url": {
          "raw": "https://countries.trevorblades.com/",
          "protocol": "https",
          "host": [
            "countries",
            "trevorblades",
            "com"
          ],
          "path": [
            ""
          ]
        },
        "description": "### Overview\nThis request executes a GraphQL query against the public Countries API to retrieve a list of all available countries, including each country’s ISO 3166-1 alpha-2 code and name. It is useful for populating country dropdowns, performing lookups, or validating country codes in applications.\n\n---\n\n### Endpoint\n- **URL:** `https://countries.trevorblades.com/`\n- **Protocol:** HTTPS\n- **Transport:** GraphQL over HTTP\n- **HTTP Method:** `POST`\n\nThe endpoint accepts GraphQL requests encoded as JSON in the HTTP request body.\n\n---\n\n### Headers\nTypical headers used by this request:\n\n- **Content-Type:** `application/json`\n- **Accept:** `application/json`\n\n> Note: If you change the request body format, ensure the `Content-Type` header matches the payload type. For standard GraphQL-over-HTTP in Postman, `application/json` is appropriate.\n\n---\n\n### Request Body (GraphQL)\nThis request uses Postman’s **GraphQL** body type. The JSON payload sent to the server has the following structure:\n\n```json\n{\n  \"query\": \"query GetCountries {\\n    countries {\\n        code\\n        name\\n    }\\n}\\n\",\n  \"variables\": \"\"\n}\n```\n\n#### GraphQL Operation\n```graphql\nquery GetCountries {\n  countries {\n    code\n    name\n  }\n}\n```\n\n- **Operation name:** `GetCountries`\n- **Root field:** `countries`\n- **Selected fields per country:**\n  - `code` – ISO 3166-1 alpha-2 country code (e.g., `\"US\"`, `\"FR\"`).\n  - `name` – Human-readable country name (e.g., `\"United States\"`, `\"France\"`).\n\nThere are no variables required for this query; it retrieves all countries available from the API.\n\n---\n\n### Successful Response\nOn success, the server responds with **HTTP 200 OK** and a JSON payload containing the `data` field with a `countries` array.\n\n#### Example 200 Response (truncated)\n```json\n{\n  \"data\": {\n    \"countries\": [\n      { \"code\": \"AD\", \"name\": \"Andorra\" },\n      { \"code\": \"AE\", \"name\": \"United Arab Emirates\" },\n      { \"code\": \"AF\", \"name\": \"Afghanistan\" },\n      { \"code\": \"AG\", \"name\": \"Antigua and Barbuda\" },\n      { \"code\": \"AI\", \"name\": \"Anguilla\" },\n      { \"code\": \"AL\", \"name\": \"Albania\" },\n      { \"code\": \"AM\", \"name\": \"Armenia\" },\n      { \"code\": \"AO\", \"name\": \"Angola\" },\n      { \"code\": \"AQ\", \"name\": \"Antarctica\" },\n      { \"code\": \"AR\", \"name\": \"Argentina\" }\n      // ...additional countries\n    ]\n  }\n}\n```\n\n#### Expected Characteristics\n- **HTTP status:** `200 OK`\n- **Body:**\n  - Contains a top-level `data` object.\n  - `data.countries` is a non-empty array.\n  - Each entry has:\n    - `code` – a 2-character uppercase string (`/^[A-Z]{2}$/`).\n    - `name` – a non-empty string.\n- **Errors:** The top-level `errors` field is **absent** on a successful query.\n\nThe existing tests on this request validate:\n- HTTP status and status text (`200` / `OK`).\n- Presence of `data` and absence of `errors`.\n- `countries` is a non-empty array.\n- Each country has `code` and `name` as strings.\n- `code` values follow the ISO-2 pattern.\n- Known data points (e.g., `\"DO\"` → `\"Dominican Republic\"`).\n- Uniqueness of country codes.\n\n---\n\n### Unsuccessful / Error Responses\nBecause this is a public demo GraphQL API, most *transport-level* errors are related to networking or malformed HTTP requests. GraphQL-specific errors are typically returned in a `200 OK` response with an `errors` field.\n\nCommon scenarios:\n\n1. **Malformed HTTP / Non-JSON Body**\n   - **Status:** `400 Bad Request` (or other 4xx errors from the HTTP layer).\n   - **Cause:** Invalid JSON body, wrong `Content-Type`, or non-POST method.\n   - **Mitigation:** Ensure `POST` method, correct `Content-Type`, and well-formed JSON payload.\n\n2. **GraphQL Syntax or Validation Errors**\n   - **Status:** `200 OK`\n   - **Body:**\n     ```json\n     {\n       \"errors\": [\n         {\n           \"message\": \"...details about the syntax or validation error...\",\n           \"locations\": [ { \"line\": 1, \"column\": 1 } ],\n           \"path\": [\"countries\"]\n         }\n       ],\n       \"data\": null\n     }\n     ```\n   - **Cause:** Invalid query syntax, requesting unknown fields, or otherwise failing schema validation.\n   - **Detection:** Look for the presence of a top-level `errors` array; tests in this request will fail if `errors` exists.\n\n3. **Connectivity / Server Errors**\n   - **Status:** `5xx` (e.g., `500`, `502`, `503`), or network-level failures.\n   - **Cause:** API host is unreachable or experiencing issues.\n   - **Mitigation:** Retry later or verify network/proxy settings.\n\n---\n\n### Usage Notes\n- Use this request when you need a **complete list of countries** with standard ISO-2 codes.\n- You can clone this request and modify the GraphQL selection set to request additional fields (e.g., continent, currency) if supported by the schema.\n- This request is designed to be **unauthenticated**; no auth configuration is required.\n\n---\n\n### Related Collection\nThis request is part of the **GQL - Countries** collection, which groups related GraphQL operations against the Countries API. Use the collection to explore and test other queries such as single-country lookups and continent-based filtering."
      },
      "response": []
    },
    {
      "name": "Get a country",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "e3e31436-c6ee-4b9b-a267-1929443a1fe7",
            "exec": [
              "/* ===============================",
              "   HTTP-level validation",
              "================================ */",
              "",
              "pm.test('Status code is 200', () => {",
              "  pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Status text is OK', () => {",
              "  pm.expect(pm.response.status).to.equal('OK');",
              "});",
              "",
              "/* ===============================",
              "   Parse JSON",
              "================================ */",
              "",
              "const json = pm.response.json();",
              "",
              "/* ===============================",
              "   GraphQL protocol validation",
              "================================ */",
              "",
              "pm.test('GraphQL returned data', () => {",
              "  pm.expect(json.data).to.exist;",
              "});",
              "",
              "pm.test('GraphQL returned no errors', () => {",
              "  pm.expect(json.errors).to.not.exist;",
              "});",
              "",
              "/* ===============================",
              "   Schema validation (GraphQL contract)",
              "================================ */",
              "",
              "pm.test('Country schema matches GraphQL contract', () => {",
              "  const country = json.data.country;",
              "",
              "  pm.expect(country).to.be.an('object');",
              "",
              "  // Scalars",
              "  pm.expect(country.code).to.be.a('string');",
              "  pm.expect(country.name).to.be.a('string');",
              "  pm.expect(country.currency).to.be.a('string');",
              "  pm.expect(country.emoji).to.be.a('string');",
              "",
              "  // Nullable field (capital may be null in schema, so just validate type if present)",
              "  if (country.capital !== null) {",
              "    pm.expect(country.capital).to.be.a('string');",
              "  }",
              "",
              "  // Continent object",
              "  pm.expect(country.continent).to.be.an('object');",
              "  pm.expect(country.continent.code).to.be.a('string');",
              "  pm.expect(country.continent.name).to.be.a('string');",
              "",
              "  // Languages list",
              "  pm.expect(country.languages).to.be.an('array');",
              "  country.languages.forEach(lang => {",
              "    pm.expect(lang).to.be.an('object');",
              "    pm.expect(lang.code).to.be.a('string');",
              "    pm.expect(lang.name).to.be.a('string');",
              "  });",
              "});",
              "",
              "/* ===============================",
              "   Data correctness validation",
              "================================ */",
              "",
              "const country = json.data.country;",
              "",
              "pm.test('Country has correct code', () => {",
              "  pm.expect(country.code).to.equal('CO');",
              "});",
              "",
              "pm.test('Country name is Colombia', () => {",
              "  pm.expect(country.name).to.equal('Colombia');",
              "});",
              "",
              "pm.test('Capital is Bogotá', () => {",
              "  pm.expect(country.capital).to.equal('Bogotá');",
              "});",
              "",
              "pm.test('Currency is COP', () => {",
              "  pm.expect(country.currency).to.equal('COP');",
              "});",
              "",
              "pm.test('Country belongs to South America', () => {",
              "  pm.expect(country.continent.code).to.equal('SA');",
              "  pm.expect(country.continent.name).to.equal('South America');",
              "});",
              "",
              "pm.test('Spanish is listed as a language', () => {",
              "  const spanish = country.languages.find(l => l.code === 'es');",
              "  pm.expect(spanish).to.exist;",
              "  pm.expect(spanish.name).to.equal('Spanish');",
              "});"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "id": "f846ac2a-569d-4919-8e99-586b764d9a55",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "graphql",
          "graphql": {
            "query": "query GetCountryByCode($code: ID!) {\n    country(code: $code) {\n        code\n        name\n        capital\n        currency\n        emoji\n        continent {\n            code\n            name\n        }\n        languages {\n            code\n            name\n        }\n    }\n}\n",
            "variables": "{\n    \"code\": \"CO\"\n}"
          }
        },
        "url": {
          "raw": "https://countries.trevorblades.com/",
          "protocol": "https",
          "host": [
            "countries",
            "trevorblades",
            "com"
          ],
          "path": [
            ""
          ]
        },
        "description": "Queries the Countries GraphQL API for details of a single country, given its ISO code.\n\n## Purpose\nUse this request to fetch one country by its ISO 3166-1 alpha-2 code (for example, `CO` for Colombia, `US` for United States, `FR` for France). This is useful for quickly validating that the Countries GraphQL API is available and returning correct data for a specific country.\n\n## Variables\n- `code: ID!`  \n  - Required GraphQL variable.  \n  - Must be a valid ISO 3166-1 alpha-2 country code (two uppercase letters).  \n  - Example: `{ \"code\": \"CO\" }`.\n\n## Query and Returned Fields\nThe GraphQL query is `GetCountryByCode` and requests the following fields under `country`:\n- `code` – Country ISO code (alpha-2)\n- `name` – Country name\n- `capital` – Capital city (may be null for some countries)\n- `currency` – Currency code(s) for the country\n- `emoji` – Emoji flag for the country\n- `continent` – Continent object with:\n  - `code` – Continent code\n  - `name` – Continent name\n- `languages` – Array of language objects with:\n  - `code` – Language code\n  - `name` – Language name\n\n## Example usages\n- **Collection smoke test**: Add this request near the top of your collection and run it with a known-good code (e.g., `CO`) to verify that the Countries GraphQL API is reachable and returning a 200 response with valid data.\n- **Monitor health check**: Include this request in a scheduled monitor run (e.g., every 5–15 minutes) using a stable country code. Use the existing tests on the request to fail the monitor if the API is down, slow to respond, or returns unexpected data for that country.\n\nThe request URL, method, body, and tests remain unchanged; only this documentation describes how to use the request effectively."
      },
      "response": []
    },
    {
      "name": "Get a country without id - 400",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "e3e31436-c6ee-4b9b-a267-1929443a1fe7",
            "exec": [
              "/* ===============================",
              "   HTTP-level validation",
              "================================ */",
              "",
              "pm.test('Status code is 400', () => {",
              "  pm.response.to.have.status(400);",
              "});",
              "",
              "pm.test('Status text is Bad Request', () => {",
              "  pm.expect(pm.response.status).to.equal('Bad Request');",
              "});",
              "",
              "/* ===============================",
              "   Parse JSON",
              "================================ */",
              "",
              "const json = pm.response.json();",
              "",
              "/* ===============================",
              "   GraphQL protocol validation",
              "================================ */",
              "",
              "pm.test('GraphQL returned errors', () => {",
              "  pm.expect(json.errors).to.exist;",
              "  pm.expect(json.errors).to.be.an('array');",
              "  pm.expect(json.errors.length).to.be.greaterThan(0);",
              "});",
              "",
              "pm.test('GraphQL did not return data', () => {",
              "  // Some servers may omit \"data\" entirely in errors-only responses",
              "  pm.expect(json.data).to.not.exist;",
              "});",
              "",
              "/* ===============================",
              "   Schema validation (GraphQL error contract)",
              "================================ */",
              "",
              "pm.test('GraphQL error object schema is valid', () => {",
              "  json.errors.forEach(err => {",
              "    pm.expect(err).to.be.an('object');",
              "    pm.expect(err).to.have.property('message');",
              "    pm.expect(err.message).to.be.a('string').and.not.be.empty;",
              "",
              "    // locations is optional in GraphQL, but present in the response",
              "    if (err.locations !== undefined) {",
              "      pm.expect(err.locations).to.be.an('array').and.not.be.empty;",
              "",
              "      err.locations.forEach(loc => {",
              "        pm.expect(loc).to.be.an('object');",
              "        pm.expect(loc).to.have.property('line');",
              "        pm.expect(loc).to.have.property('column');",
              "        pm.expect(loc.line).to.be.a('number');",
              "        pm.expect(loc.column).to.be.a('number');",
              "      });",
              "    }",
              "  });",
              "});",
              "",
              "/* ===============================",
              "   Error correctness (this specific negative case)",
              "================================ */",
              "",
              "pm.test('Error message matches missing required variable \"code\"', () => {",
              "  const msg = json.errors[0].message;",
              "  pm.expect(msg).to.include('Variable \"$code\"');",
              "  pm.expect(msg).to.include('ID!');",
              "  pm.expect(msg).to.include('was not provided');",
              "});"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "id": "b9c22bd5-1564-41d4-855f-b37018611d07",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "graphql",
          "graphql": {
            "query": "query GetCountryByCode($code: ID!) {\n    country(code: $code) {\n        code\n        name\n        capital\n        currency\n        emoji\n        continent {\n            code\n            name\n        }\n        languages {\n            code\n            name\n        }\n    }\n}\n",
            "variables": ""
          }
        },
        "url": {
          "raw": "https://countries.trevorblades.com/",
          "protocol": "https",
          "host": [
            "countries",
            "trevorblades",
            "com"
          ],
          "path": [
            ""
          ]
        },
        "description": "### Purpose\nThis POST GraphQL request intentionally **omits the required `code` variable** for the `GetCountryByCode` query against `https://countries.trevorblades.com/`. It is designed to demonstrate how the API surfaces GraphQL validation errors when a required variable is missing.\n\n### Request body\n- **Operation**: `query GetCountryByCode($code: ID!) { country(code: $code) { ... } }`\n- **Variables**: empty / not provided (the `code` variable is omitted on purpose)\n\n### Expected response\n- **HTTP status**: `400 Bad Request`\n- **GraphQL payload shape**:\n  - An `errors` array containing at least one error object describing the missing required variable `code`.\n  - No `data` field present in the response (errors-only response).\n\n### Attached tests\nThe post-response test script validates that:\n- The HTTP response status is `400 Bad Request`.\n- The GraphQL error contract is respected (an `errors` array with well-formed error objects, optional `locations`, etc.).\n- The primary error message explicitly refers to the missing required variable `\"$code\"` of type `ID!` and indicates that it was not provided."
      },
      "response": []
    },
    {
      "name": "Get countries by continent code",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "5b072f04-4d51-4e0a-bf47-0456820ab532",
            "exec": [
              "/* ===============================",
              "   HTTP-level validation",
              "================================ */",
              "",
              "pm.test('Status code is 200', () => {",
              "  pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Status text is OK', () => {",
              "  pm.expect(pm.response.status).to.equal('OK');",
              "});",
              "",
              "/* ===============================",
              "   Parse JSON",
              "================================ */",
              "",
              "const json = pm.response.json();",
              "",
              "/* ===============================",
              "   GraphQL protocol validation",
              "================================ */",
              "",
              "pm.test('GraphQL returned data', () => {",
              "  pm.expect(json.data).to.exist;",
              "});",
              "",
              "pm.test('GraphQL returned no errors', () => {",
              "  pm.expect(json.errors).to.not.exist;",
              "});",
              "",
              "/* ===============================",
              "   Schema validation (GraphQL contract)",
              "================================ */",
              "",
              "pm.test('Countries schema matches GraphQL contract', () => {",
              "  pm.expect(json.data.countries).to.be.an('array');",
              "",
              "  json.data.countries.forEach((country) => {",
              "    pm.expect(country).to.be.an('object');",
              "",
              "    // Required fields in your selection set",
              "    pm.expect(country).to.have.property('code');",
              "    pm.expect(country).to.have.property('name');",
              "",
              "    // Types",
              "    pm.expect(country.code).to.be.a('string');",
              "    pm.expect(country.name).to.be.a('string');",
              "",
              "    // Basic contract constraints (common for ISO-2 codes)",
              "    pm.expect(country.code).to.match(/^[A-Z]{2}$/);",
              "",
              "    // Non-empty strings",
              "    pm.expect(country.name.trim().length).to.be.greaterThan(0);",
              "  });",
              "});",
              "",
              "/* ===============================",
              "   Data quality validation",
              "================================ */",
              "",
              "pm.test('Countries list is not empty', () => {",
              "  pm.expect(json.data.countries.length).to.be.greaterThan(0);",
              "});",
              "",
              "pm.test('Country codes are unique', () => {",
              "  const codes = json.data.countries.map(c => c.code);",
              "  pm.expect(new Set(codes).size).to.equal(codes.length);",
              "});",
              "",
              "pm.test('Known European countries exist (sanity checks)', () => {",
              "  const codes = json.data.countries.map(c => c.code);",
              "",
              "  pm.expect(codes).to.include('DE'); // Germany",
              "  pm.expect(codes).to.include('FR'); // France",
              "  pm.expect(codes).to.include('ES'); // Spain",
              "  pm.expect(codes).to.include('IT'); // Italy",
              "});"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "id": "37bd8abf-264d-463c-8aea-51178e09a982",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "graphql",
          "graphql": {
            "query": "",
            "variables": ""
          }
        },
        "url": {
          "raw": "https://countries.trevorblades.com/",
          "protocol": "https",
          "host": [
            "countries",
            "trevorblades",
            "com"
          ],
          "path": [
            ""
          ]
        },
        "description": "### Summary\nThis request sends a GraphQL query to the Countries API (`https://countries.trevorblades.com/`) to retrieve a list of countries filtered by continent code. It is useful for validating the API’s GraphQL schema, data quality, and ensuring the service returns consistent country metadata.\n\n### How to Use\n- **HTTP Method**: `POST`\n- **URL**: `https://countries.trevorblades.com/`\n- **Body Type**: `GraphQL`\n- **Required fields in the query**: `countries { code name }`\n\n#### Query\nUpdate the **GraphQL query** field to include a `countries` selection that optionally takes a filter by continent code. A typical query looks like:\n```graphql\nquery GetCountriesByContinent($continent: String) {\n  countries(filter: { continent: { eq: $continent } }) {\n    code\n    name\n  }\n}\n```\n\n#### Variables\nSet the **variables** field to a JSON object string that provides the continent code, for example:\n```json\n{\n  \"continent\": \"EU\"\n}\n```\n- `continent` should be a valid continent code understood by the API (for example: `AF`, `AN`, `AS`, `EU`, `NA`, `OC`, `SA`).\n- You can leave `continent` `null` or omit the filter to retrieve all countries.\n\n### What the Built-in Tests Validate\nThe post-response script contains several tests that validate both HTTP-level behavior and GraphQL-specific contract and data quality:\n\n1. **HTTP-level validation**\n   - Status code is **200**.\n   - Status text is **OK**.\n\n2. **GraphQL protocol validation**\n   - The response has a `data` field.\n   - The response has **no** `errors` field.\n\n3. **Schema / contract validation**\n   - `data.countries` is an **array**.\n   - Each item in `data.countries` is an **object** that contains:\n     - `code` (string, non-empty, matches `/^[A-Z]{2}$/` for ISO-2 code format)\n     - `name` (non-empty string).\n\n4. **Data quality checks**\n   - The list of countries is **not empty**.\n   - All `code` values are **unique**.\n   - Sanity checks for known European countries (e.g. `DE`, `FR`, etc.) are present in the result set.\n\nUse this request when you want a quick, automated check that the Countries GraphQL API is up, behaving correctly, and returning well-structured, realistic country data for a given continent."
      },
      "response": []
    },
    {
      "name": "Get countries with an invalid field",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "3b53d85d-3260-4baf-a123-1ab7ef8384af",
            "exec": [
              "/* ===============================",
              "   HTTP-level validation",
              "================================ */",
              "",
              "pm.test('Status code is 200', () => {",
              "  pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Status text is OK', () => {",
              "  pm.expect(pm.response.status).to.equal('OK');",
              "});",
              "",
              "/* ===============================",
              "   Parse JSON",
              "================================ */",
              "",
              "const json = pm.response.json();",
              "",
              "/* ===============================",
              "   GraphQL protocol validation",
              "================================ */",
              "",
              "pm.test('GraphQL returned errors', () => {",
              "  pm.expect(json.errors).to.exist;",
              "  pm.expect(json.errors).to.be.an('array');",
              "  pm.expect(json.errors.length).to.be.greaterThan(0);",
              "});",
              "",
              "pm.test('GraphQL returned no data', () => {",
              "  pm.expect(json.data).to.not.exist;",
              "});",
              "",
              "/* ===============================",
              "   Schema validation (GraphQL error contract)",
              "================================ */",
              "",
              "pm.test('GraphQL error object matches schema', () => {",
              "  json.errors.forEach(err => {",
              "    pm.expect(err).to.be.an('object');",
              "",
              "    // message is required",
              "    pm.expect(err).to.have.property('message');",
              "    pm.expect(err.message).to.be.a('string').and.not.be.empty;",
              "",
              "    // locations is optional but present here",
              "    if (err.locations !== undefined) {",
              "      pm.expect(err.locations).to.be.an('array').and.not.be.empty;",
              "      err.locations.forEach(loc => {",
              "        pm.expect(loc).to.have.property('line').that.is.a('number');",
              "        pm.expect(loc).to.have.property('column').that.is.a('number');",
              "      });",
              "    }",
              "",
              "    // extensions is optional",
              "    if (err.extensions !== undefined) {",
              "      pm.expect(err.extensions).to.be.an('object');",
              "      if (err.extensions.code !== undefined) {",
              "        pm.expect(err.extensions.code).to.be.a('string');",
              "      }",
              "    }",
              "  });",
              "});",
              "",
              "/* ===============================",
              "   Error correctness (this specific case)",
              "================================ */",
              "",
              "pm.test('Error indicates invalid field on Country type', () => {",
              "  const msg = json.errors[0].message;",
              "  pm.expect(msg).to.include('Cannot query field');",
              "  pm.expect(msg).to.include('thisIsNotValidField');",
              "  pm.expect(msg).to.include('Country');",
              "});",
              "",
              "pm.test('Error code is GRAPHQL_VALIDATION_FAILED', () => {",
              "  pm.expect(json.errors[0].extensions.code).to.equal('GRAPHQL_VALIDATION_FAILED');",
              "});"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "id": "5787a91a-39ed-4b51-bf24-61998f522e75",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "graphql",
          "graphql": {
            "query": "",
            "variables": ""
          }
        },
        "url": {
          "raw": "https://countries.trevorblades.com/",
          "protocol": "https",
          "host": [
            "countries",
            "trevorblades",
            "com"
          ],
          "path": [
            ""
          ]
        },
        "description": "### Overview\nThis request sends a GraphQL operation to `https://countries.trevorblades.com/` and is designed **not** to be valid. It deliberately queries a non‑existent field on the `Country` type to demonstrate how GraphQL validation errors are returned and tested in Postman.\n\n### Behavior\n- Sends a GraphQL POST request to the Countries API endpoint.\n- The query includes an invalid field on the `Country` type (e.g., `thisIsNotValidField`).\n- Because the field does not exist in the schema, the GraphQL server rejects the query at validation time.\n\n### Expected Response Shape\nThe response is expected to:\n- Return an HTTP status code **200 OK**.\n- Contain **no `data` property** in the JSON payload.\n- Include an **`errors` array** with at least one error object, where:\n  - `message` describes the invalid field.\n  - `locations` (line/column) may be present to indicate where the error occurred in the query.\n  - `extensions.code` is set to **`GRAPHQL_VALIDATION_FAILED`**.\n\n### Relation to Postman Tests\nThe post‑response tests for this request assert the **GraphQL error contract**:\n- HTTP‑level checks confirm status `200` and status text `OK`.\n- GraphQL‑level checks verify that:\n  - An `errors` array exists and is non‑empty.\n  - No `data` field is present.\n  - Each error object conforms to the expected schema (required `message`, optional `locations` and `extensions`).\n  - The first error’s message indicates an invalid field on the `Country` type.\n  - The `extensions.code` field equals `GRAPHQL_VALIDATION_FAILED`.\n\nUse this request as a reference for how to capture and test **schema‑level validation errors** in GraphQL using Postman tests."
      },
      "response": []
    }
  ]
}